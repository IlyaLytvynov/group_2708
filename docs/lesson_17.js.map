{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lesson_17/lesson_17.js","webpack:///./src/lesson_17/lesson_17.scss","webpack:///./src/lesson_17/taskList.js","webpack:///./src/lesson_17/taskList.scss"],"names":["taskList","TaskList","getRandomId","Math","floor","random","rootElement","document","querySelector","tasks","init","getTasks","render","xhr","XMLHttpRequest","open","send","onreadystatechange","readyState","status","console","log","response","JSON","parse","renderList","innerHTML","renderWrapper","renderInput","form","createElement","input","addEventListener","e","preventDefault","addTask","appendChild","wrapper","setRequestHeader","newTask","title","value","stringify","push","renderItem","ul","task","li","span","button","textContent","removeItem","id","classList","add","completed","filterdTasks"],"mappings":"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","file":"lesson_17.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n","import './lesson_17.scss';\nimport { TaskList } from './taskList';\n\nconst taskList = new TaskList();\n","// extracted by mini-css-extract-plugin","import './taskList.scss';\n\nconst getRandomId = () => Math.floor(Math.random() * 9999);\n\nexport class TaskList {\n  constructor(rootElement = document.querySelector('body')) {\n    this.rootElement = rootElement;\n    this.tasks = [];\n    this.init();\n  }\n\n  init() {\n    this.getTasks();\n    this.render();\n  }\n\n  getTasks() {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', 'http://localhost:4001/list');\n    xhr.send();\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          console.log(xhr.response, typeof xhr.response);\n          this.tasks = JSON.parse(xhr.response);\n          console.log(this.tasks);\n          this.renderList();\n        } else {\n          this.rootElement.innerHTML = 'ERROR!';\n        }\n      }\n    };\n  }\n\n  render() {\n    this.renderWrapper();\n    this.renderInput();\n  }\n\n  renderInput() {\n    const form = document.createElement('form');\n    this.input = document.createElement('input');\n    form.addEventListener('submit', e => {\n      e.preventDefault();\n      this.addTask();\n    });\n    form.appendChild(this.input);\n    this.wrapper.appendChild(form);\n  }\n\n  addTask() {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', 'http://localhost:4001/list');\n\n    xhr.setRequestHeader('Content-Type', 'application/json');\n\n    const newTask = {\n      title: this.input.value,\n    };\n\n    xhr.send(JSON.stringify(newTask));\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          this.tasks.push(JSON.parse(xhr.response));\n          this.renderItem(JSON.parse(xhr.response));\n          this.input.value = ''; // RESET FORM\n        } else {\n          this.rootElement.innerHTML = 'ERROR!';\n        }\n      }\n    };\n  }\n\n  renderWrapper() {\n    this.wrapper = document.createElement('div');\n    this.rootElement.appendChild(this.wrapper);\n  }\n\n  renderList() {\n    if (this.ul) {\n      this.ul.innerHTML = '';\n    } else {\n      this.ul = document.createElement('ul');\n    }\n\n    for (let task of this.tasks) {\n      this.renderItem(task);\n    }\n    this.wrapper.appendChild(this.ul);\n  }\n\n  renderItem(task) {\n    const li = document.createElement('li');\n    const span = document.createElement('span');\n    const button = document.createElement('button');\n    button.textContent = 'DELETE';\n    li.appendChild(span);\n    li.appendChild(button);\n\n    button.addEventListener('click', () => {\n      this.removeItem(task.id);\n    });\n\n    span.textContent = task.title;\n    li.id = task.id;\n    li.classList.add('item');\n    if (task.completed) {\n      li.classList.add('item_completed');\n    }\n    this.ul.appendChild(li);\n  }\n\n  removeItem(id) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('DELETE', `http://localhost:4001/list/${id}`);\n    xhr.send();\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          const filterdTasks = [];\n          for (let task of this.tasks) {\n            if (task.id !== id) {\n              filterdTasks.push(task);\n            }\n          }\n          this.tasks = filterdTasks;\n          this.renderList();\n        } else {\n          this.rootElement.innerHTML = 'ERROR!';\n        }\n      }\n    };\n  }\n}\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}